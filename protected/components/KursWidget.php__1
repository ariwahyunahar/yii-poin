<?php	class KursWidget extends CWidget	{		public $title = array();		public $show = array();				protected function registerClientScript()		{			// ...publish CSS or JavaScript file here...			/*$cs=Yii::app()->clientScript;			$cs->registerCssFile($cssFile);			$cs->registerScriptFile($jsFile);*/		}				public function run() {								error_reporting(0);				$url = "http://www.bca.co.id/id/biaya-limit/kurs_counter_bca/kurs_counter_bca_landing.jsp" ;			$html_start = '<table style="width:300px;float:left;" border="1">';			$html_end = '<table width="200" border="1" style="float:left;">';			ini_set ('allow_url_fopen', '1' );			ini_set ('auto_detect_line_endings', 'Off') ;			ini_set ('default_socket_timeout', '60' );			ini_set ('max_execution_time', '0' );						flush() ;						$f = fopen ($url, 'r' );			$doc = '';						while (! feof ($f) ) {				$doc = $doc . fgets($f, 3072) ;				// triple buffer, default buffer 1024 bytes			}						fclose ($f) ;			if ($doc != '') {				$a = strpos($doc, $html_start) ;				$b = strpos($doc, $html_end) - $a ;				$show = substr($doc, $a, $b) ;				$show = ereg_replace('keterangan3','keterangan4>', $show) ;			}			flush() ;									$vars= array(				'title'=> $this->title,				'show' => $show							);						$this->render('kurswidget', $vars);		}			}?>